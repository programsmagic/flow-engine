<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flow Engine - Simple Workflow Framework for Node.js</title>
    <meta name="description" content="Simple workflow framework for Node.js backends. Easy integration with Express, Fastify, Koa, and any Node.js framework.">
    <meta name="keywords" content="workflow, backend, express, fastify, koa, middleware, api, framework, nodejs, typescript">
    <meta name="author" content="Prashant Mishra">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Flow Engine - Simple Workflow Framework for Node.js">
    <meta property="og:description" content="Simple workflow framework for Node.js backends. Easy integration with Express, Fastify, Koa, and any Node.js framework.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://programsmagic.github.io/flow-engine">
    <meta property="og:image" content="https://programsmagic.github.io/flow-engine/assets/og-image.png">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Flow Engine - Simple Workflow Framework for Node.js">
    <meta name="twitter:description" content="Simple workflow framework for Node.js backends. Easy integration with Express, Fastify, Koa, and any Node.js framework.">
    <meta name="twitter:image" content="https://programsmagic.github.io/flow-engine/assets/og-image.png">

    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link rel="stylesheet" href="styles.css">
    <link rel="canonical" href="https://programsmagic.github.io/flow-engine">
</head>
<body>
    <header class="hero">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">
                    <span class="emoji">üåä</span>
                    Flow Engine
                </h1>
                <p class="hero-subtitle">Simple workflow framework for Node.js backends</p>
                <p class="hero-description">
                    Replace complex controller logic with easy-to-use workflow steps. 
                    Integrates seamlessly with Express, Fastify, Koa, and any Node.js framework.
                </p>
                
                <div class="hero-badges">
                    <a href="https://www.npmjs.com/package/node-workflow-engine" class="badge npm">
                        <span class="badge-icon">üì¶</span>
                        <span class="badge-text">npm install node-workflow-engine</span>
                    </a>
                    <a href="https://github.com/programsmagic/flow-engine" class="badge github">
                        <span class="badge-icon">‚≠ê</span>
                        <span class="badge-text">Star on GitHub</span>
                    </a>
                </div>
                
                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-number">üéØ</span>
                        <span class="stat-label">Super Easy</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">üîó</span>
                        <span class="stat-label">Framework Agnostic</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">üì¶</span>
                        <span class="stat-label">Common Payload</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">üîÑ</span>
                        <span class="stat-label">Built-in Retries</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="main">
        <section class="section">
            <div class="container">
                <h2 class="section-title">Quick Start</h2>
                
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-title">Installation</span>
                        <button class="copy-btn" onclick="copyCode('install-code')">Copy</button>
                    </div>
                    <pre id="install-code"><code>npm install node-workflow-engine
# or
yarn add node-workflow-engine</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-title">Basic Usage</span>
                        <button class="copy-btn" onclick="copyCode('basic-code')">Copy</button>
            </div>
                        <pre id="basic-code"><code>import { createFlow } from 'node-workflow-engine';

// Create a simple workflow
const flow = createFlow()
  .setCommonPayload({ apiKey: 'your-api-key' })
  .step('validate', async (data) => {
    if (!data.email) throw new Error('Email required');
    return { isValid: true };
  })
  .step('process', async (data) => {
    // Your processing logic here
    return { processed: true };
  });

// Execute the workflow
const result = await flow.execute({ email: 'user@example.com' });
console.log(result.success); // true
console.log(result.data); // { isValid: true, processed: true }</code></pre>
            </div>
        </div>
    </section>

        <section class="section">
        <div class="container">
                <h2 class="section-title">Framework Integration</h2>
                
                <div class="integration-tabs">
                    <button class="tab-btn active" onclick="showTab('express')">Express.js</button>
                    <button class="tab-btn" onclick="showTab('fastify')">Fastify</button>
                    <button class="tab-btn" onclick="showTab('koa')">Koa</button>
                    <button class="tab-btn" onclick="showTab('standalone')">Standalone</button>
                </div>

                <div id="express" class="tab-content active">
                        <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">Express.js Integration</span>
                            <button class="copy-btn" onclick="copyCode('express-code')">Copy</button>
                        </div>
                        <pre id="express-code"><code>import express from 'express';
import { createFlow, expressFlow } from 'node-workflow-engine';

const app = express();
app.use(express.json());

// Create user registration flow
const userFlow = createFlow()
  .setCommonPayload({ timestamp: new Date().toISOString() })
  .step('validate', async (data) => {
    if (!data.email || !data.password) {
      throw new Error('Email and password required');
    }
    return { isValid: true };
  })
  .step('createUser', async (data) => {
    const user = { id: 1, email: data.email };
    return { user };
  })
  .step('sendEmail', async (data) => {
    console.log(`Welcome email sent to ${data.user.email}`);
    return { emailSent: true };
  });

// Use as Express middleware
app.post('/api/users', expressFlow(userFlow), (req, res) => {
  res.json({
    success: true,
    user: req.flowResult.data.user
  });
});

app.listen(3000);</code></pre>
                    </div>
                </div>
                
                <div id="fastify" class="tab-content">
                        <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">Fastify Integration</span>
                            <button class="copy-btn" onclick="copyCode('fastify-code')">Copy</button>
                        </div>
                        <pre id="fastify-code"><code>import Fastify from 'fastify';
import { createFlow } from 'node-workflow-engine';

const fastify = Fastify();

const orderFlow = createFlow()
  .setCommonPayload({ currency: 'USD' })
  .step('validateOrder', async (data) => {
    if (!data.items?.length) throw new Error('No items');
    return { valid: true };
  })
  .step('calculateTotal', async (data) => {
    const total = data.items.reduce((sum, item) => sum + item.price, 0);
    return { total };
  })
  .step('processPayment', async (data) => {
    return { paymentId: 'pay_123' };
  });

fastify.post('/api/orders', async (request, reply) => {
  const result = await orderFlow.execute(request.body);
  
  if (result.success) {
    return { order: result.data };
  } else {
    reply.code(400);
    return { error: result.error };
  }
});</code></pre>
                    </div>
                </div>
                
                <div id="koa" class="tab-content">
                        <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">Koa Integration</span>
                            <button class="copy-btn" onclick="copyCode('koa-code')">Copy</button>
                        </div>
                        <pre id="koa-code"><code>import Koa from 'koa';
import Router from 'koa-router';
import { createFlow } from 'node-workflow-engine';

const app = new Koa();
const router = new Router();

const authFlow = createFlow()
  .step('validateCredentials', async (data) => {
    if (!data.email || !data.password) {
      throw new Error('Invalid credentials');
    }
    return { valid: true };
  })
  .step('generateToken', async (data) => {
    const token = `jwt_${Math.random().toString(36).substr(2, 9)}`;
    return { token };
  });

router.post('/api/auth', async (ctx) => {
  const result = await authFlow.execute(ctx.request.body);
  
  if (result.success) {
    ctx.body = { token: result.data.token };
  } else {
    ctx.status = 401;
    ctx.body = { error: result.error };
  }
});</code></pre>
                    </div>
                </div>
                
                <div id="standalone" class="tab-content">
                        <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">Standalone Usage</span>
                            <button class="copy-btn" onclick="copyCode('standalone-code')">Copy</button>
                        </div>
                        <pre id="standalone-code"><code>import { createFlow } from 'node-workflow-engine';

// Create a simple workflow
const workflow = createFlow()
  .setCommonPayload({
    environment: 'production',
    version: '1.0.0'
  })
  .step('step1', async (data) => {
    console.log('Executing step 1');
    return { step1Result: 'completed' };
  })
  .step('step2', async (data) => {
    console.log('Executing step 2');
    return { step2Result: 'completed' };
  });

// Execute the workflow
const result = await workflow.execute({
  input: 'test data'
});

console.log('Workflow result:', result);</code></pre>
                </div>
            </div>
        </div>
    </section>

        <section class="section">
        <div class="container">
                <h2 class="section-title">Advanced Features</h2>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üîß</div>
                        <h3 class="feature-title">Middleware Support</h3>
                        <p class="feature-description">Add authentication, logging, and other middleware that runs before each step.</p>
                        <div class="feature-code">
                            <pre><code>flow.use(async (data, context) => {
  // Authentication middleware
  if (!data.apiKey) throw new Error('Unauthorized');
  context.metadata.userId = 'user_123';
});</code></pre>
                        </div>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üîÑ</div>
                        <h3 class="feature-title">Retry Logic & Timeouts</h3>
                        <p class="feature-description">Built-in retry with exponential backoff and configurable timeouts.</p>
                        <div class="feature-code">
                            <pre><code>flow.step('externalAPI', async (data) => {
  const response = await fetch('https://api.example.com/data');
  return { data: await response.json() };
}, { retries: 3, timeout: 10000 });</code></pre>
                    </div>
                </div>
                
                    <div class="feature-card">
                        <div class="feature-icon">üîó</div>
                        <h3 class="feature-title">Step Dependencies</h3>
                        <p class="feature-description">Define dependencies between steps to control execution order.</p>
                        <div class="feature-code">
                            <pre><code>flow.step('fetchOrders', async (data) => {
  return { orders: await getOrders(data.user.id) };
}, { dependencies: ['fetchUser'] });</code></pre>
                    </div>
                </div>
                
                    <div class="feature-card">
                        <div class="feature-icon">üìä</div>
                        <h3 class="feature-title">Execution Tracking</h3>
                        <p class="feature-description">Know exactly which steps executed, execution time, and detailed metadata.</p>
                        <div class="feature-code">
                            <pre><code>const result = await flow.execute(inputData);
console.log(result.steps);        // ['validate', 'process', 'save']
console.log(result.executionTime); // 245
console.log(result.metadata);     // { requestId: 'exec_123' }</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </section>

        <section class="section">
        <div class="container">
                <h2 class="section-title">Real-World Examples</h2>
                
                <div class="example-card">
                    <h3 class="example-title">E-commerce Order Processing</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">Complete Order Flow</span>
                            <button class="copy-btn" onclick="copyCode('order-code')">Copy</button>
                        </div>
                        <pre id="order-code"><code>const orderFlow = createFlow()
  .setCommonPayload({ 
    currency: 'USD',
    taxRate: 0.08,
    shippingRate: 5.99
  })
  .step('validateOrder', async (data) => {
    if (!data.items?.length) throw new Error('No items in order');
    if (!data.customerId) throw new Error('Customer ID required');
    return { orderValid: true };
  })
  .step('checkInventory', async (data) => {
    for (const item of data.items) {
      const available = await checkStock(item.productId);
      if (available < item.quantity) {
        throw new Error(`Insufficient stock for ${item.productId}`);
      }
    }
    return { inventoryChecked: true };
  })
  .step('calculatePricing', async (data) => {
    const subtotal = data.items.reduce((sum, item) => sum + item.price, 0);
    const tax = subtotal * data.taxRate;
    const shipping = subtotal > 50 ? 0 : data.shippingRate;
    const total = subtotal + tax + shipping;
    return { subtotal, tax, shipping, total };
  })
  .step('processPayment', async (data) => {
    const payment = await stripe.charges.create({
      amount: Math.round(data.total * 100),
      currency: data.currency,
      source: data.paymentToken
    });
    return { paymentId: payment.id };
  })
  .step('createOrder', async (data) => {
    const order = await db.orders.create({
      customerId: data.customerId,
      items: data.items,
      total: data.total,
      paymentId: data.paymentId,
      status: 'confirmed'
    });
    return { order };
  })
  .step('sendConfirmation', async (data) => {
    await emailService.send({
      to: data.customer.email,
      template: 'order-confirmation',
      data: { order: data.order }
    });
    return { emailSent: true };
  });

// Use in Express route
app.post('/api/orders', expressFlow(orderFlow), (req, res) => {
  res.json({ order: req.flowResult.data.order });
});</code></pre>
                </div>
            </div>
        </div>
    </section>

        <section class="section">
        <div class="container">
                <h2 class="section-title">API Reference</h2>
                
                <div class="api-reference">
                    <div class="api-item">
                        <h3 class="api-title">createFlow()</h3>
                        <p class="api-description">Creates a new workflow instance.</p>
                        <div class="api-code">
                            <pre><code>const flow = createFlow();</code></pre>
                </div>
                </div>
                
                    <div class="api-item">
                        <h3 class="api-title">.setCommonPayload(payload)</h3>
                        <p class="api-description">Sets data available to all steps.</p>
                        <div class="api-code">
                            <pre><code>flow.setCommonPayload({ apiKey: 'your-key', version: '1.0' });</code></pre>
                </div>
            </div>
            
                    <div class="api-item">
                        <h3 class="api-title">.use(middleware)</h3>
                        <p class="api-description">Adds middleware that runs before each step.</p>
                        <div class="api-code">
                            <pre><code>flow.use(async (data, context) => {
  console.log(`Executing step with data:`, data);
});</code></pre>
                        </div>
                    </div>

                    <div class="api-item">
                        <h3 class="api-title">.step(id, handler, options?)</h3>
                        <p class="api-description">Adds a step to the workflow.</p>
                        <div class="api-code">
                            <pre><code>flow.step('process', async (data) => {
  return { processed: true };
}, { retries: 3, timeout: 5000 });</code></pre>
                        </div>
                        </div>

                    <div class="api-item">
                        <h3 class="api-title">.execute(inputData)</h3>
                        <p class="api-description">Executes the workflow with input data.</p>
                        <div class="api-code">
                            <pre><code>const result = await flow.execute({ email: 'user@example.com' });</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 class="footer-title">üåä Flow Engine</h3>
                    <p class="footer-description">Simple workflow framework for Node.js backends</p>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-subtitle">Links</h4>
                    <ul class="footer-links">
                        <li><a href="https://github.com/programsmagic/flow-engine">GitHub</a></li>
                        <li><a href="https://www.npmjs.com/package/node-workflow-engine">NPM</a></li>
                        <li><a href="https://github.com/programsmagic/flow-engine/issues">Issues</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-subtitle">Author</h4>
                    <p class="footer-author">Created by <a href="https://github.com/prashantmishra">Prashant Mishra</a></p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p class="footer-copyright">
                    ¬© 2024 Flow Engine. Licensed under the MIT License.
                </p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>